<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For My Twin ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #ff4757;
            --accent: #ff6b6b;
            --bg-grad: linear-gradient(135deg, #ffafbd 0%, #ffc3a0 100%);
        }

        * { box-sizing: border-box; touch-action: manipulation; -webkit-tap-highlight-color: transparent; }
        body, html { height: 100%; margin: 0; padding: 0; overflow: hidden; font-family: 'Poppins', sans-serif; background: #ffafbd; width: 100%; }
        body { display: flex; justify-content: center; align-items: center; background: var(--bg-grad); }

        #musicBtn {
            position: fixed; top: 20px; right: 20px; z-index: 9999;
            background: rgba(255, 255, 255, 0.7); width: 45px; height: 45px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* --- STABLE PREMIUM ENVELOPE --- */
        #envelope-page {
            position: fixed; inset: 0; z-index: 5000; background: var(--bg-grad);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.6s ease;
        }

        .env-box {
            position: relative; width: 280px; height: 180px; background: #fff;
            border-radius: 0 0 10px 10px; box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            cursor: pointer;
        }

        /* The Top Flap */
        .env-flap {
            position: absolute; top: 0; left: 0; width: 0; height: 0;
            border-left: 140px solid transparent; border-right: 140px solid transparent;
            border-top: 100px solid #f3f3f3; transform-origin: top;
            transition: transform 0.5s ease; z-index: 3;
        }

        /* The Paper */
        .env-paper {
            position: absolute; top: 5px; left: 10px; width: 260px; height: 160px;
            background: #fffcf5; border: 1px solid #eee; border-radius: 5px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 20px; text-align: center; z-index: 1;
            transition: transform 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Open State */
        .env-box.is-open .env-flap { transform: rotateX(180deg); z-index: 0; }
        .env-box.is-open .env-paper { transform: translateY(-130px); z-index: 4; box-shadow: 0 -10px 20px rgba(0,0,0,0.05); }

        /* --- MAIN CONTENT --- */
        .container {
            width: 90%; max-width: 380px; background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            padding: 25px; border-radius: 30px; text-align: center;
            position: relative; min-height: 500px; display: flex; flex-direction: column; justify-content: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); transition: transform 0.1s;
        }

        .hidden { display: none !important; }
        .celebration-title { font-family: 'Dancing Script', cursive; font-size: 2.2rem; color: var(--primary); margin: 10px 0; }
        .cute-btn { 
            padding: 14px 25px; margin: 8px; border: none; border-radius: 50px; 
            background: var(--accent); color: white; font-weight: 600; cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.2);
        }

        #floatingLoveBtn {
            position: absolute; z-index: 1000; background: var(--primary); color: white;
            padding: 12px 20px; border-radius: 50px; border: none; font-size: 0.9rem;
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }

        /* --- SLIDER --- */
        .slider-container { position: relative; padding: 40px 0; width: 85%; margin: 0 auto; }
        .slider-track { height: 6px; background: rgba(255,255,255,0.7); border-radius: 10px; position: relative; }
        #sliderThumb { 
            width: 45px; height: 45px; position: absolute; top: 50%; left: 0; transform: translate(-50%, -50%); 
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff4757"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') no-repeat center;
            background-size: contain; z-index: 20;
        }

        .check-item { text-align: left; margin: 10px 0; font-size: 0.85rem; display: flex; align-items: center; }
        .check-item input { margin-right: 12px; width: 18px; height: 18px; accent-color: var(--primary); }
        
        .photo-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; }
        .photo-box { width: 100%; aspect-ratio: 1/1; border-radius: 12px; overflow: hidden; border: 3px solid white; }
        .photo-box img { width: 100%; height: 100%; object-fit: cover; }

        .trail { position: fixed; pointer-events: none; z-index: 9999; animation: fade 0.8s forwards; font-size: 20px; }
        @keyframes fade { 0% { opacity: 1; } 100% { opacity: 0; transform: scale(0.5) translateY(-20px); } }
    </style>
</head>
<body>

    <div id="musicBtn" onclick="toggleMute()">üîä</div>
    <audio id="bgMusic" loop preload="auto"><source src="music.mp3" type="audio/mpeg"></audio>

    <div id="envelope-page">
        <div class="env-box" onclick="openMe(this)">
            <div class="env-flap"></div>
            <div class="env-paper">
                <p style="font-family:'Dancing Script'; color:var(--primary); font-size:1.3rem; margin:0;">Happy Valentine's Day!</p>
                <p style="font-size:0.7rem; color:#888; margin-top:10px;">Click to Open ‚ù§Ô∏è</p>
            </div>
        </div>
        <div style="font-family:'Dancing Script'; margin-top:50px; text-align:center;">
            <p style="margin:0; font-size:1.6rem;">To my twin,</p>
            <p style="margin:0; opacity:0.7;">From your sunshine üåª</p>
        </div>
    </div>

    <div class="container hidden" id="mainApp">
        <div id="step1">
            <h2 class="celebration-title">27 / 12 / 2025</h2>
            <p>Our journey began. ‚ù§Ô∏è</p>
            <button class="cute-btn" onclick="next('step1','step2')">Continue ‚û°Ô∏è</button>
        </div>

        <div id="step2" class="hidden">
            <h2 class="celebration-title">338 Days Met</h2>
            <p>A bond like no other. ‚ú®</p>
            <div style="font-size: 3rem; margin: 10px;">‚ù§Ô∏èüîó‚ù§Ô∏è</div>
            <button class="cute-btn" onclick="next('step2','step3')">Next ‚û°Ô∏è</button>
        </div>

        <div id="step3" class="hidden">
            <h2 class="celebration-title">Do you like me?</h2>
            <div style="height: 250px; position: relative;">
                <button class="cute-btn" id="yes1" style="position: absolute; left: 10%; top: 10%;">Yes</button>
                <button class="cute-btn" id="no1" style="position: absolute; right: 10%; top: 10%;" onclick="startFloating()">No</button>
                <button id="floatingLoveBtn" class="hidden" onclick="next('step3','step4')">I don't like... I LOVE YOU! ‚ù§Ô∏è</button>
            </div>
        </div>

        <div id="step4" class="hidden">
            <h2 class="celebration-title">Our Moments</h2>
            <div class="photo-grid">
                <div class="photo-box"><img src="pic1.jpg.jpg"></div>
                <div class="photo-box"><img src="pic2.jpg.jpg"></div>
                <div class="photo-box"><img src="pic3.jpg.jpg"></div>
                <div class="photo-box"><img src="pic4.jpg.jpg"></div>
            </div>
            <button class="cute-btn" onclick="next('step4','step5')">Goals ‚û°Ô∏è</button>
        </div>

        <div id="step5" class="hidden">
            <h2 class="celebration-title">Checklist</h2>
            <div class="check-item"><input type="checkbox" class="must"> Get golden in boards üèÖ</div>
            <div class="check-item"><input type="checkbox" class="must"> Get into a good college üéì</div>
            <div class="check-item"><input type="checkbox" class="must"> Become independent üíº</div>
            <div class="check-item"><input type="checkbox"> Become Husband & Wife (Optional) üíç</div>
            <button class="cute-btn" id="goalBtn" disabled style="opacity:0.5; width:100%;">Locked üîí</button>
        </div>

        <div id="step6" class="hidden">
            <h2 class="celebration-title">Love Meter</h2>
            <p id="mStatus" style="font-size: 0.75rem;">Push the limit... üòâ</p>
            <div class="slider-container">
                <div class="slider-track" id="track"><div id="sliderThumb"></div></div>
            </div>
            <h1 id="lVal" style="font-size: 3.5rem; margin: 0; color: var(--primary);">0%</h1>
            <button class="cute-btn" id="mBtn" disabled style="background:#bbb; width:100%;">Locked üîí</button>
        </div>

        <div id="step7" class="hidden">
            <h2 class="celebration-title">Be my Valentine?</h2>
            <div style="height: 200px; position: relative;">
                <button class="cute-btn" onclick="next('step7','step8')">Yes (Red)</button>
                <button class="cute-btn" style="color:gold; background:#333;" onclick="next('step7','step8')">Yes (Yellow)</button>
                <button class="cute-btn" id="noFinal" style="position: absolute; bottom:0; left:30%;">No</button>
            </div>
        </div>

        <div id="step8" class="hidden">
            <h2 class="celebration-title">My Promise</h2>
            <div style="background:white; padding:15px; border-radius:15px; text-align:left; font-size:0.85rem; line-height:1.5;">
                I'm trying to be your <b style="color:#d4af37">Husband</b> someday. 
                <br><br>Wherever the sun rises, I'll think of you. You're my first love, and if Allah wills, my last. 
                <br><br><b>Loveyou 3000.</b>
            </div>
            <button class="cute-btn" onclick="location.reload()">Finish ‚ú®</button>
        </div>
    </div>

    <script>
        const music = document.getElementById('bgMusic');
        const main = document.getElementById('mainApp');

        function toggleMute() {
            music.muted = !music.muted;
            document.getElementById('musicBtn').innerHTML = music.muted ? 'üîá' : 'üîä';
        }

        function openMe(el) {
            el.classList.add('is-open');
            music.play().catch(() => {});
            setTimeout(() => {
                document.getElementById('envelope-page').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('envelope-page').style.display = 'none';
                    main.classList.remove('hidden');
                }, 600);
            }, 2000);
        }

        function next(c, n) {
            document.getElementById(c).classList.add('hidden');
            document.getElementById(n).classList.remove('hidden');
        }

        function startFloating() {
            document.getElementById('no1').style.display = 'none';
            const f = document.getElementById('floatingLoveBtn');
            f.classList.remove('hidden');
            setInterval(() => {
                f.style.left = Math.random() * 60 + 20 + "%";
                f.style.top = Math.random() * 60 + 20 + "%";
            }, 1000);
        }

        // Checklist
        document.querySelectorAll('input').forEach(i => {
            i.onchange = () => {
                const ok = Array.from(document.querySelectorAll('.must')).every(m => m.checked);
                const b = document.getElementById('goalBtn');
                b.disabled = !ok; b.style.opacity = ok ? "1" : "0.5";
                b.innerText = ok ? "Continue ‚û°Ô∏è" : "Locked üîí";
            };
        });
        document.getElementById('goalBtn').onclick = () => next('step5','step6');

        // Meter
        const thumb = document.getElementById('sliderThumb');
        const track = document.getElementById('track');
        let drag = false;
        thumb.ontouchstart = () => drag = true;
        window.ontouchend = () => drag = false;
        window.ontouchmove = (e) => {
            if (!drag) return;
            const rect = track.getBoundingClientRect();
            let p = Math.round(((e.touches[0].clientX - rect.left) / rect.width) * 100);
            thumb.style.left = p + "%";
            document.getElementById('lVal').innerText = (p < 0 ? 0 : p) + "%";
            if(p > 100) {
                document.getElementById('mStatus').innerText = "LIMITLESS LOVE! ‚ö†Ô∏è";
                main.style.transform = `translate(${(Math.random()-0.5)*10}px, ${(Math.random()-0.5)*10}px)`;
            }
            if(p >= 100) {
                const b = document.getElementById('mBtn');
                b.disabled = false; b.innerText = "Unlock ‚ú®"; b.style.background = "#ff4757";
            }
        };
        document.getElementById('mBtn').onclick = () => next('step6','step7');

        // No Run
        document.getElementById('noFinal').ontouchstart = function(e) {
            e.preventDefault();
            this.style.left = Math.random() * 80 + "%";
            this.style.top = Math.random() * 80 + "%";
        };

        // Trail
        window.ontouchmove = (e) => {
            const t = document.createElement('div');
            t.className = 'trail'; t.innerText = 'üåª';
            t.style.left = e.touches[0].clientX + 'px'; t.style.top = e.touches[0].clientY + 'px';
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 800);
        };
    </script>
</body>
</html>
