<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A Letter For Faria ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #ff4757;
            --accent: #ff6b6b;
            --bg-grad: linear-gradient(135deg, #ffafbd 0%, #ffc3a0 100%);
        }

        * { box-sizing: border-box; touch-action: manipulation; -webkit-tap-highlight-color: transparent; }
        html, body { height: 100%; margin: 0; padding: 0; background: #ffafbd; font-family: 'Poppins', sans-serif; overflow: hidden; position: fixed; width: 100%; }
        body { display: flex; justify-content: center; align-items: center; background: var(--bg-grad); transition: background 0.3s; }

        /* --- Envelope Styles --- */
        #envelope-page {
            position: absolute; width: 100%; height: 100%; display: flex;
            flex-direction: column; justify-content: center; align-items: center;
            z-index: 1000; transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .envelope-wrapper { cursor: pointer; position: relative; width: 280px; height: 180px; background: #fff; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .envelope-wrapper::before {
            content: ""; position: absolute; top: 0; z-index: 2;
            border-top: 100px solid #f9f9f9; border-left: 140px solid transparent; border-right: 140px solid transparent;
            transform-origin: top; transition: all 0.5s ease 0.1s;
        }
        
        .envelope-text { font-family: 'Dancing Script', cursive; color: var(--primary); font-size: 1.2rem; margin-top: 20px; text-align: center; }

        /* When Open */
        .envelope-wrapper.open::before { transform: rotateX(180deg); z-index: 0; }
        .letter-preview {
            position: absolute; bottom: 0; left: 10px; width: 260px; height: 160px;
            background: #fff; z-index: 1; transition: all 0.5s ease 0.4s;
            padding: 20px; text-align: center; border: 1px solid #eee;
        }
        .envelope-wrapper.open .letter-preview { transform: translateY(-100px); height: 200px; box-shadow: 0 -5px 15px rgba(0,0,0,0.05); }

        /* --- Main App Container --- */
        .container {
            width: 95%; max-width: 380px; background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            padding: 25px; border-radius: 30px; border: 1px solid rgba(255, 255, 255, 0.4);
            text-align: center; z-index: 10; position: relative; min-height: 420px;
            display: flex; flex-direction: column; justify-content: center;
            box-shadow: 0 15px 35px rgba(255, 71, 87, 0.2);
        }

        /* Utilities */
        .hidden { display: none !important; }
        .celebration-title { font-family: 'Dancing Script', cursive; font-size: 2.2rem; color: var(--primary); margin: 0 0 10px 0; }
        .cute-btn { display: inline-block; padding: 12px 24px; margin: 8px; border: none; border-radius: 50px; background: var(--accent); color: white; font-size: 14px; font-weight: 600; cursor: pointer; box-shadow: 0 4px 15px rgba(255, 71, 87, 0.3); z-index: 10; }
        .btn-yellow { color: #FFD700 !important; background: #333; }
        .btn-blue { color: #00BFFF !important; background: #333; }
        .btn-green { color: #32CD32 !important; background: #333; }

        /* Breakable Slider */
        .slider-container { position: relative; padding: 40px 0; width: 80%; margin: 0 auto; }
        .slider-track { height: 6px; background: rgba(255,255,255,0.6); border-radius: 10px; width: 100%; position: relative; }
        #sliderThumb { width: 45px; height: 45px; position: absolute; top: 50%; left: 0; transform: translate(-50%, -50%); cursor: grab; background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff4757"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') no-repeat center; background-size: contain; z-index: 20; }

        .photo-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; }
        .photo-box { width: 100%; aspect-ratio: 1/1; border-radius: 15px; overflow: hidden; border: 3px solid white; }
        .photo-box img { width: 100%; height: 100%; object-fit: cover; }
        .btn-wrapper-large { position: relative; width: 100%; height: 250px; display: flex; flex-wrap: wrap; justify-content: center; }
        
        .burst-heart { position: absolute; pointer-events: none; z-index: 50; animation: burst 0.8s ease-out forwards; font-size: 20px; }
        @keyframes burst { 0% { transform: translate(0,0) scale(1); opacity: 1; } 100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; } }
        .heart-float { position: absolute; pointer-events: none; z-index: 1; animation: floatUp 5s linear infinite; }
        @keyframes floatUp { 0% { transform: translateY(110vh) rotate(0); opacity: 1; } 100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; } }
    </style>
</head>
<body>

    <div id="envelope-page">
        <div class="envelope-wrapper" onclick="openLetter(this)">
            <div class="letter-preview">
                <p style="font-family: 'Dancing Script', cursive; font-size: 1.5rem; margin-top: 20px; color: #ff4757;">Happy Valentine's Day! ‚ù§Ô∏è</p>
                <p style="font-size: 0.8rem; color: #666;">Tap to read...</p>
            </div>
        </div>
        <div class="envelope-text">
            <p style="margin: 5px 0;">To my twin,</p>
            <p style="margin: 5px 0; font-size: 0.9rem; opacity: 0.8;">From your sunshine üåª</p>
        </div>
    </div>

    <div class="container hidden" id="mainContainer">
        <audio id="bgMusic" loop preload="auto"><source src="music.mp3" type="audio/mpeg"></audio>

        <div id="pageDate">
            <h2 class="celebration-title">27 / 12 / 2025</h2>
            <p>Our journey officially began. ‚ù§Ô∏è</p>
            <button class="cute-btn" onclick="nextPage('pageDate', 'pageCounter')">Continue ‚û°Ô∏è</button>
        </div>

        <div id="pageCounter" class="hidden">
            <h2 class="celebration-title">338 Days Met</h2>
            <p>Every single day has been a blessing, Twin. ‚ú®</p>
            <button class="cute-btn" onclick="nextPage('pageCounter', 'question1')">Next ‚û°Ô∏è</button>
        </div>

        <div id="question1" class="hidden">
            <h2 class="celebration-title">Do you like me?</h2>
            <div class="btn-wrapper-large" id="wrap1">
                <button class="cute-btn" id="yesBtn1" style="position: absolute; left: 10%; top: 40px;">Yes</button>
                <button class="cute-btn" id="noBtn1" style="position: absolute; right: 10%; top: 40px;">No</button>
            </div>
            <button class="cute-btn hidden" id="secretAnswerBtn" style="width:100%">I LOVE YOU! ‚ù§Ô∏è</button>
        </div>

        <div id="pageGallery" class="hidden">
            <h2 class="celebration-title">Our Moments</h2>
            <div class="photo-grid">
                <div class="photo-box"><img src="pic1.jpg.jpg"></div>
                <div class="photo-box"><img src="pic2.jpg.jpg"></div>
                <div class="photo-box"><img src="pic3.jpg.jpg"></div>
                <div class="photo-box"><img src="pic4.jpg.jpg"></div>
            </div>
            <button class="cute-btn" onclick="nextPage('pageGallery', 'question2')">Proceed ‚û°Ô∏è</button>
        </div>

        <div id="question2" class="hidden">
            <h2 class="celebration-title">Love Meter</h2>
            <p id="meterStatus" style="font-weight: 600; color: #555;">Slide to 100%... or more? üòâ</p>
            <div class="slider-container" id="sliderArea">
                <div class="slider-track" id="track">
                    <div id="sliderThumb"></div>
                </div>
            </div>
            <h1 id="loveValue" style="font-size: 3rem; margin: 0; color: var(--primary);">0%</h1>
            <button class="cute-btn" id="nextBtn" disabled style="background:#bbb; opacity:0.5; width: 100%;">LOCKED üîí</button>
        </div>

        <div id="question3" class="hidden">
            <h2 class="celebration-title">Be my Valentine?</h2>
            <div class="btn-wrapper-large" id="wrap3">
                <button class="cute-btn yes-grow-final" onclick="nextPage('question3', 'pageLetter1')">Yes (Red)</button>
                <button class="cute-btn btn-yellow yes-grow-final" onclick="nextPage('question3', 'pageLetter1')">Yes (Yellow)</button>
                <button class="cute-btn btn-blue yes-grow-final" onclick="nextPage('question3', 'pageLetter1')">Yes (Blue)</button>
                <button class="cute-btn btn-green yes-grow-final" onclick="nextPage('question3', 'pageLetter1')">Yes (Green)</button>
                <button class="cute-btn" id="noBtn3" style="position: absolute; bottom: 20px;">No</button>
            </div>
        </div>

        <div id="pageLetter1" class="hidden">
            <h2 class="celebration-title">For You, Princess</h2>
            <div style="background: white; padding: 15px; border-radius: 15px; text-align: left; font-size: 0.9rem;">
                To my fairytale princess, I won‚Äôt ask you to be my valentine‚ÄîI‚Äôm not trying to be your boyfriend, just your husband someday. No matter where life takes you, whenever the sun rises, I‚Äôll think of you.
            </div>
            <button class="cute-btn" onclick="nextPage('pageLetter1', 'pageLetter2')">Read more ‚û°Ô∏è</button>
        </div>

        <div id="pageLetter2" class="hidden">
            <div style="background: white; padding: 15px; border-radius: 15px; text-align: left; font-size: 0.9rem;">
                You‚Äôre my first love, and if Allah wills, my last. Like a compass, what‚Äôs meant for you always finds its way back. Keep smiling freely. I‚Äôll grow into your dream man. <br><br><b>Loveyou 3000 always.</b>
            </div>
            <button class="cute-btn" onclick="nextPage('pageLetter2', 'celebration')">Finish ‚ú®</button>
        </div>

        <div id="celebration" class="hidden">
            <h1 class="celebration-title">Date Confirmed! ü•≥</h1>
            <p>I'm the luckiest twin ever! ‚ù§Ô∏è</p>
            <div style="font-size: 3.5rem;">üíñ‚ú®üåª</div>
            <p style="font-size: 0.8rem; opacity: 0.8;">Love, Your Sunshine üåª</p>
        </div>
    </div>

    <script>
        const container = document.getElementById('mainContainer');
        const music = document.getElementById('bgMusic');
        let clickCount = 0; let yesScale = 1;

        function openLetter(el) {
            el.classList.add('open');
            if(navigator.vibrate) navigator.vibrate(50);
            music.play().catch(()=>{});
            
            setTimeout(() => {
                document.getElementById('envelope-page').style.opacity = '0';
                document.getElementById('envelope-page').style.transform = 'scale(1.2)';
                setTimeout(() => {
                    document.getElementById('envelope-page').classList.add('hidden');
                    container.classList.remove('hidden');
                    setInterval(createHeart, 450);
                }, 800);
            }, 1800);
        }

        function nextPage(curr, next) {
            document.getElementById(curr).classList.add('hidden');
            document.getElementById(next).classList.remove('hidden');
            if(next === 'celebration') startMegaConfetti();
        }

        // --- Breakable Slider Logic ---
        const thumb = document.getElementById('sliderThumb');
        const track = document.getElementById('track');
        const loveValue = document.getElementById('loveValue');
        const meterStatus = document.getElementById('meterStatus');
        const nextBtn = document.getElementById('nextBtn');
        let isDragging = false;

        const startDrag = () => { isDragging = true; thumb.style.scale = "1.3"; };
        const endDrag = () => { isDragging = false; thumb.style.scale = "1"; };

        const onDrag = (e) => {
            if (!isDragging) return;
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const trackRect = track.getBoundingClientRect();
            let x = clientX - trackRect.left;
            let percent = Math.round((x / trackRect.width) * 100);
            thumb.style.left = x + "px";
            if (percent < 0) percent = 0;
            loveValue.innerText = percent + "%";

            if (percent <= 100) {
                document.body.style.background = `linear-gradient(135deg, #ffafbd 0%, rgba(255, 71, 87, ${percent/100}) 100%)`;
                meterStatus.innerText = percent < 50 ? "Is that all? ü§®" : "Almost there... üî•";
            } else {
                let overload = percent - 100;
                meterStatus.innerText = "‚ö†Ô∏è SYSTEM OVERLOAD: LIMITLESS LOVE!! ‚ö†Ô∏è";
                container.style.transform = `translate(${(Math.random()-0.5)*overload/3}px, ${(Math.random()-0.5)*overload/3}px)`;
                if(percent % 10 === 0) createBurst();
            }

            if (percent >= 100) {
                nextBtn.disabled = false; nextBtn.innerText = "CONTINUE ‚ú®";
                nextBtn.style.background = "#ff4757"; nextBtn.style.opacity = "1";
            }
        };

        thumb.addEventListener('mousedown', startDrag);
        window.addEventListener('mouseup', endDrag);
        window.addEventListener('mousemove', onDrag);
        thumb.addEventListener('touchstart', startDrag);
        window.addEventListener('touchend', endDrag);
        window.addEventListener('touchmove', onDrag);

        function createBurst() {
            const b = document.createElement('div');
            b.className = 'burst-heart'; b.innerText = 'üíñ';
            b.style.left = thumb.getBoundingClientRect().left + "px";
            b.style.top = thumb.getBoundingClientRect().top + "px";
            b.style.setProperty('--tx', (Math.random()-0.5)*200 + "px");
            b.style.setProperty('--ty', (Math.random()-0.5)*200 + "px");
            document.body.appendChild(b);
            setTimeout(() => b.remove(), 800);
        }

        // --- Button Chaos ---
        function moveBtn(btn, wrapper) {
            clickCount++;
            const rect = wrapper.getBoundingClientRect();
            const bRect = btn.getBoundingClientRect();
            btn.style.position = 'absolute';
            btn.style.left = Math.max(0, Math.random() * (rect.width - bRect.width)) + "px";
            btn.style.top = Math.max(0, Math.random() * (rect.height - bRect.height)) + "px";
            yesScale += 0.3;
            if(btn.id === 'noBtn1') document.getElementById('yesBtn1').style.transform = `scale(${yesScale})`;
            if(btn.id === 'noBtn3') document.querySelectorAll('.yes-grow-final').forEach(b => b.style.transform = `scale(${yesScale})`);
        }

        document.getElementById('noBtn1').onclick = function() { moveBtn(this, document.getElementById('wrap1')); };
        document.getElementById('noBtn3').onclick = function() { moveBtn(this, document.getElementById('wrap3')); };
        document.getElementById('yesBtn1').onclick = () => nextPage('question1', 'pageGallery');
        nextBtn.onclick = () => nextPage('question2', 'question3');

        function createHeart() {
            const h = document.createElement('div');
            h.className = 'heart-float'; h.innerText = Math.random() > 0.5 ? '‚ù§Ô∏è' : 'üåª';
            h.style.left = Math.random() * 100 + "vw";
            h.style.fontSize = (Math.random() * 10 + 15) + "px";
            document.body.appendChild(h);
            setTimeout(() => h.remove(), 5000);
        }

        function startMegaConfetti() {
            for(let i=0; i<100; i++) {
                const c = document.createElement('div');
                c.className = 'confetti-piece';
                c.style.background = ['#ff4757', '#FFD700', '#00BFFF', '#32CD32'][Math.floor(Math.random()*4)];
                c.style.left = Math.random()*100+"vw"; c.style.top = "-10px";
                document.body.appendChild(c);
                c.animate([{transform:'translateY(0)'},{transform:`translate(${(Math.random()-0.5)*500}px, 105vh) rotate(720deg)`}], {duration: 2500, easing:'ease-out'});
            }
        }
    </script>
</body>
</html>
