<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A Letter For Faria ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #ff4757;
            --accent: #ff6b6b;
            --sun: #FFD700;
            --bg-grad: linear-gradient(135deg, #ffafbd 0%, #ffc3a0 100%);
        }

        * { box-sizing: border-box; touch-action: manipulation; }
        html, body { height: 100%; margin: 0; padding: 0; background: #ffafbd; font-family: 'Poppins', sans-serif; overflow: hidden; position: fixed; width: 100%; }
        body { display: flex; justify-content: center; align-items: center; background: var(--bg-grad); transition: background 1s ease; }

        /* --- Envelope --- */
        #envelope-page { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; transition: 0.8s; }
        .envelope-wrapper { cursor: pointer; position: relative; width: 280px; height: 180px; background: #fff; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .envelope-wrapper::before { content: ""; position: absolute; top: 0; z-index: 2; border-top: 100px solid #fdfdfd; border-left: 140px solid transparent; border-right: 140px solid transparent; transform-origin: top; transition: 0.5s ease; }
        .envelope-wrapper.open::before { transform: rotateX(180deg); z-index: 0; }
        .letter-preview { position: absolute; bottom: 0; left: 10px; width: 260px; height: 160px; background: #fff; z-index: 1; transition: 0.5s ease 0.3s; padding: 20px; text-align: center; border: 1px solid #eee; }
        .envelope-wrapper.open .letter-preview { transform: translateY(-100px); height: 200px; }

        /* --- Main Container --- */
        .container {
            width: 90%; max-width: 380px; background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            padding: 25px; border-radius: 30px; text-align: center; z-index: 10; position: relative; min-height: 480px;
            display: flex; flex-direction: column; justify-content: center; box-shadow: 0 15px 35px rgba(255, 71, 87, 0.2);
        }

        .hidden { display: none !important; }
        .celebration-title { font-family: 'Dancing Script', cursive; font-size: 2.2rem; color: var(--primary); margin-bottom: 10px; }
        .husband-gold { color: #d4af37; font-weight: bold; text-shadow: 0 0 8px rgba(212, 175, 55, 0.5); animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.8; } 50% { opacity: 1; } 100% { opacity: 0.8; } }

        .cute-btn { 
            padding: 12px 24px; margin: 8px; border: none; border-radius: 50px; 
            background: var(--accent); color: white; font-weight: 600; cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.3); transition: 0.3s;
        }

        /* --- Question 1 Logic --- */
        .btn-zone { position: relative; width: 100%; height: 250px; }
        #floatingLoveBtn {
            position: absolute; z-index: 99; white-space: nowrap; font-size: 0.9rem;
            background: #ff4757; color: white; padding: 10px 15px; border-radius: 50px;
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4); cursor: pointer;
        }

        /* --- Slider --- */
        .slider-container { position: relative; padding: 40px 0; width: 80%; margin: 0 auto; }
        .slider-track { height: 4px; background: rgba(255,255,255,0.8); border-radius: 10px; width: 100%; position: relative; }
        #sliderThumb { width: 45px; height: 45px; position: absolute; top: 50%; left: 0; transform: translate(-50%, -50%); cursor: grab; background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff4757"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') no-repeat center; background-size: contain; z-index: 20; }

        /* --- New Future Page --- */
        .check-item { text-align: left; margin: 10px 0; font-size: 0.9rem; display: flex; align-items: center; }
        .check-item input { margin-right: 10px; accent-color: var(--primary); width: 18px; height: 18px; }

        /* --- Rainbow Buttons --- */
        .txt-yellow { color: #FFD700 !important; background: #333; }
        .txt-blue { color: #00BFFF !important; background: #333; }
        .txt-green { color: #32CD32 !important; background: #333; }

        .photo-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; }
        .photo-box { width: 100%; aspect-ratio: 1/1; border-radius: 10px; overflow: hidden; border: 3px solid white; }
        .photo-box img { width: 100%; height: 100%; object-fit: cover; }

        /* Trail & Floating */
        .trail { position: fixed; pointer-events: none; font-size: 20px; z-index: 9999; animation: fadeTrail 1s forwards; }
        @keyframes fadeTrail { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(0.5) translateY(-20px); } }
        .heart-float { position: absolute; pointer-events: none; z-index: 1; animation: floatUp 5s linear infinite; }
        @keyframes floatUp { 0% { transform: translateY(110vh) rotate(0); opacity: 1; } 100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; } }
    </style>
</head>
<body>

    <div id="musicToggle" style="position:fixed; top:20px; right:20px; z-index:2000; font-size:25px; cursor:pointer;">üåª</div>

    <div id="envelope-page">
        <div class="envelope-wrapper" onclick="openLetter(this)">
            <div class="letter-preview">
                <p style="font-family:'Dancing Script'; color:var(--primary); font-size:1.4rem;">Click to Open ‚ù§Ô∏è</p>
            </div>
        </div>
        <div style="font-family:'Dancing Script'; margin-top:20px; text-align:center;">
            <p style="margin:0; font-size:1.5rem;">To my twin,</p>
            <p style="margin:0; opacity:0.7;">From your sunshine üåª</p>
        </div>
    </div>

    <div class="container hidden" id="mainContainer">
        <audio id="bgMusic" loop preload="auto"><source src="music.mp3" type="audio/mpeg"></audio>

        <div id="pageDate">
            <h2 class="celebration-title">27 / 12 / 2025</h2>
            <p>The day my world got a lot brighter. ‚ù§Ô∏è</p>
            <button class="cute-btn" onclick="nextPage('pageDate', 'pageCounter')">Continue ‚û°Ô∏è</button>
        </div>

        <div id="pageCounter" class="hidden">
            <h2 class="celebration-title">338 Days Met</h2>
            <p>338 days of laughs, twin energy, and growing together. ‚ú®</p>
            <div style="font-size: 2rem;">üíñ <span style="animation: pulse 1s infinite;">üîó</span> üíñ</div>
            <button class="cute-btn" onclick="nextPage('pageCounter', 'question1')">Next ‚û°Ô∏è</button>
        </div>

        <div id="question1" class="hidden">
            <h2 class="celebration-title">Do you like me?</h2>
            <p style="font-size:0.8rem;">Try clicking 'No' if you dare...</p>
            <div class="btn-zone" id="zone1">
                <button class="cute-btn" id="yesBtn1" style="position: absolute; left: 10%; top: 20%;">Yes</button>
                <button class="cute-btn" id="noBtn1" style="position: absolute; right: 10%; top: 20%;">No</button>
                <button id="floatingLoveBtn" class="hidden" onclick="nextPage('question1', 'pageGallery')">I don't like... I LOVE YOU! ‚ù§Ô∏è</button>
            </div>
        </div>

        <div id="pageGallery" class="hidden">
            <h2 class="celebration-title">Our Moments</h2>
            <div class="photo-grid">
                <div class="photo-box"><img src="pic1.jpg.jpg"></div>
                <div class="photo-box"><img src="pic2.jpg.jpg"></div>
                <div class="photo-box"><img src="pic3.jpg.jpg"></div>
                <div class="photo-box"><img src="pic4.jpg.jpg"></div>
            </div>
            <button class="cute-btn" onclick="nextPage('pageGallery', 'pageFuture')">Our Future ‚û°Ô∏è</button>
        </div>

        <div id="pageFuture" class="hidden">
            <h2 class="celebration-title">Future Checklist</h2>
            <div class="check-item"><input type="checkbox"> Travel the world together ‚úàÔ∏è</div>
            <div class="check-item"><input type="checkbox"> Infinite late night talks üåô</div>
            <div class="check-item"><input type="checkbox"> Build our fairytale home üè°</div>
            <div class="check-item"><input type="checkbox"> Become Husband & Wife üíç</div>
            <p style="font-size:0.7rem; margin-top:15px; font-style:italic;">Check them all to proceed...</p>
            <button class="cute-btn" id="futureBtn" disabled style="opacity:0.5;">Next üîí</button>
        </div>

        <div id="question2" class="hidden">
            <h2 class="celebration-title">Love Meter</h2>
            <p id="meterStatus" style="font-size: 0.8rem;">Show me the intensity... üíñ</p>
            <div class="slider-container" id="sliderArea">
                <div class="slider-track" id="track"><div id="sliderThumb"></div></div>
            </div>
            <h1 id="loveValue" style="font-size: 3rem; margin: 0; color: var(--primary);">0%</h1>
            <button class="cute-btn" id="nextBtn" disabled style="background:#bbb; opacity:0.5; width: 100%;">LOCKED üîí</button>
        </div>

        <div id="question3" class="hidden">
            <h2 class="celebration-title">Be my Valentine?</h2>
            <div class="btn-zone" id="zone3">
                <button class="cute-btn" onclick="nextPage('question3', 'pageLetter1')">Yes (Red)</button>
                <button class="cute-btn txt-yellow" onclick="nextPage('question3', 'pageLetter1')">Yes (Yellow)</button>
                <button class="cute-btn txt-blue" onclick="nextPage('question3', 'pageLetter1')">Yes (Blue)</button>
                <button class="cute-btn txt-green" onclick="nextPage('question3', 'pageLetter1')">Yes (Green)</button>
                <button class="cute-btn" id="noBtn3" style="position: absolute; bottom: 10px; left:35%;">No</button>
            </div>
        </div>

        <div id="pageLetter1" class="hidden">
            <h2 class="celebration-title">To my Princess</h2>
            <div style="background:white; padding:15px; border-radius:15px; text-align:left; font-size:0.9rem;">
                I‚Äôm not just asking you to be my valentine. I‚Äôm not trying to be your boyfriend‚ÄîI‚Äôm trying to be your <span class="husband-gold">Husband</span> someday. 
                <br><br>Wherever the sun rises, I‚Äôll think of you. You‚Äôre my first love, and if Allah wills, my last. 
                <br><br><b>Loveyou 3000 always.</b>
            </div>
            <button class="cute-btn" onclick="finalCelebrate()">Finish ‚ú®</button>
        </div>

        <div id="celebration" class="hidden">
            <h1 class="celebration-title">Confirmed! ü•≥</h1>
            <p>I'm the luckiest twin ever!</p>
            <div style="font-size: 4rem;">üíñ‚ú®üåª</div>
            <p style="font-size: 0.8rem;">See you soon, Faria.</p>
        </div>
    </div>

    <script>
        const container = document.getElementById('mainContainer');
        const music = document.getElementById('bgMusic');
        let isMuted = false;

        // Music Toggle
        document.getElementById('musicToggle').onclick = function() {
            isMuted = !isMuted;
            music.muted = isMuted;
            this.innerText = isMuted ? "üîà" : "üåª";
        };

        // Trail effect
        window.addEventListener('touchmove', (e) => {
            const trail = document.createElement('div');
            trail.className = 'trail';
            trail.innerText = 'üåª';
            trail.style.left = e.touches[0].clientX + 'px';
            trail.style.top = e.touches[0].clientY + 'px';
            document.body.appendChild(trail);
            setTimeout(() => trail.remove(), 1000);
        });

        function openLetter(el) {
            el.classList.add('open');
            music.play().catch(()=>{});
            setTimeout(() => {
                document.getElementById('envelope-page').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('envelope-page').classList.add('hidden');
                    container.classList.remove('hidden');
                    setInterval(createHeart, 500);
                }, 800);
            }, 1500);
        }

        function nextPage(curr, next) {
            document.getElementById(curr).classList.add('hidden');
            document.getElementById(next).classList.remove('hidden');
        }

        // --- Question 1 Logic ---
        const noBtn1 = document.getElementById('noBtn1');
        const loveBtn = document.getElementById('floatingLoveBtn');
        noBtn1.onclick = () => {
            noBtn1.style.display = 'none';
            loveBtn.classList.remove('hidden');
            animateFloatingBtn();
        };

        function animateFloatingBtn() {
            const x = Math.random() * (container.offsetWidth - 100);
            const y = Math.random() * (200);
            loveBtn.style.left = x + "px";
            loveBtn.style.top = y + "px";
            if(!document.getElementById('question1').classList.contains('hidden')) {
                setTimeout(animateFloatingBtn, 1000);
            }
        }

        // --- Future Checklist Logic ---
        const checks = document.querySelectorAll('.check-item input');
        checks.forEach(c => c.onchange = () => {
            const allChecked = Array.from(checks).every(i => i.checked);
            const btn = document.getElementById('futureBtn');
            btn.disabled = !allChecked;
            btn.style.opacity = allChecked ? "1" : "0.5";
        });
        document.getElementById('futureBtn').onclick = () => nextPage('pageFuture', 'question2');

        // --- Slider Logic ---
        const thumb = document.getElementById('sliderThumb');
        const track = document.getElementById('track');
        let isDragging = false;
        thumb.ontouchstart = () => isDragging = true;
        window.ontouchend = () => isDragging = false;
        window.ontouchmove = (e) => {
            if (!isDragging) return;
            const rect = track.getBoundingClientRect();
            let x = e.touches[0].clientX - rect.left;
            thumb.style.left = x + "px";
            let p = Math.round((x / rect.width) * 100);
            document.getElementById('loveValue').innerText = p + "%";
            if(p > 100) document.getElementById('meterStatus').innerText = "LIMITLESS LOVE DETECTED! ‚ö†Ô∏è";
            if(p >= 100) {
                const btn = document.getElementById('nextBtn');
                btn.disabled = false; btn.innerText = "CONTINUE ‚ú®"; btn.style.background = "#ff4757"; btn.style.opacity = "1";
            }
        };
        document.getElementById('nextBtn').onclick = () => nextPage('question2', 'question3');

        // --- Final No Button Logic ---
        document.getElementById('noBtn3').ontouchstart = function(e) {
            e.preventDefault();
            this.style.left = Math.random() * 80 + "%";
            this.style.top = Math.random() * 80 + "%";
        };

        function finalCelebrate() {
            nextPage('pageLetter1', 'celebration');
            startMegaConfetti();
        }

        function createHeart() {
            const h = document.createElement('div');
            h.className = 'heart-float'; h.innerText = Math.random() > 0.5 ? '‚ù§Ô∏è' : 'üåª';
            h.style.left = Math.random() * 100 + "vw";
            h.style.fontSize = Math.random() * 15 + 15 + "px";
            document.body.appendChild(h);
            setTimeout(() => h.remove(), 5000);
        }

        function startMegaConfetti() {
            for(let i=0; i<100; i++) {
                const c = document.createElement('div');
                c.style.position = 'fixed'; c.style.background = ['#ff4757','#FFD700','#00BFFF','#32CD32'][Math.floor(Math.random()*4)];
                c.style.width = '10px'; c.style.height = '10px'; c.style.left = Math.random()*100+"vw"; c.style.top = "-10px";
                document.body.appendChild(c);
                c.animate([{transform:'translateY(0)'},{transform:`translate(${(Math.random()-0.5)*500}px, 100vh) rotate(720deg)`}], {duration: 3000, easing:'ease-out'});
            }
        }
    </script>
</body>
</html>
